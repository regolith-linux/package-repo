name: Debian Bullseye amd64 testing

on:
  push:
    branches: master
    paths:
      - 'stages/testing/*'
      - '.github/workflows/build-debian.yml'
      - '.github/workflows/build-pkg-workflow.yml'
      - 'distros/debian/bullseye/bullseye-model.yml'
      - 'distros/debian/bullseye/setup.sh'
  repository_dispatch:
  workflow_dispatch:

jobs:
  build:
    uses: regolith-linux/package-repo/.github/workflows/build-pkg-workflow.yml@master
    with:
      model-name: regolith-2.0-package-model.json
      distro-name: debian
      codename: bullseye
      arch: amd64
      stage: testing
    secrets:
      PACKAGE_PRIVATE_KEY: ${{ secrets.PACKAGE_PRIVATE_KEY }}
